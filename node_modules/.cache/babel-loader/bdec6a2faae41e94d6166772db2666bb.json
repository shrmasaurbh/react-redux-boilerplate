{"ast":null,"code":"var _jsxFileName = \"/home/dell/frontends/magnet_frontend_old/src/pages/login/index.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { adminLogin } from \"../../actions/commonActions\";\nimport { getCookie, setCookie, eraseCookie } from \"../../utils\";\nimport Loading from \"../components/Common/Loading\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      if (e.target.name === \"rememberMe\") {\n        this.setState({\n          rememberMe: !this.state.rememberMe\n        });\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      }\n    };\n\n    this.onLogin = e => {\n      const loginRequest = (({\n        email,\n        password\n      }) => ({\n        email,\n        password,\n        role: \"Admin\"\n      }))(this.state);\n\n      if (loginRequest.email !== \"\" && loginRequest.password !== \"\") {\n        if (this.state.rememberMe) {\n          setCookie(\"login\", loginRequest.email, 1);\n          setCookie(\"pwd\", loginRequest.password, 1);\n          setCookie(\"remember\", 1, 1);\n        }\n\n        this.setState({\n          showLoader: true\n        });\n        this.props.adminLogin(loginRequest);\n      } else {\n        this.toggleLoginError();\n      }\n\n      e.preventDefault();\n    };\n\n    this.toggleLoginError = message => {\n      if (message && message !== \"\") {\n        this.setState({\n          loginErrorMessage: message,\n          showLoader: false,\n          loginError: true\n        });\n      } else {\n        this.setState({\n          loginErrorMessage: \"\",\n          showLoader: false,\n          loginError: true\n        });\n      }\n\n      let loginFailedInterval = setInterval(() => {\n        this.setState({\n          loginError: false\n        });\n        clearInterval(loginFailedInterval);\n      }, 5000);\n    };\n\n    let login = getCookie(\"login\");\n\n    let _password = getCookie(\"pwd\");\n\n    let remember = getCookie(\"remember\");\n    this.state = {\n      loggedIn: false,\n      email: login !== \"\" && login !== null ? login : \"\",\n      password: _password !== \"\" && _password !== null ? _password : \"\",\n      rememberMe: remember === \"1\" ? true : false,\n      loginError: false,\n      loginErrorMessage: \"\",\n      showLoader: false\n    };\n    let homesfy_lg = localStorage.getItem(\"homesfy\");\n\n    if (homesfy_lg && homesfy_lg !== \"\") {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.loginResponse.response.meta.status === 200 && nextProps.loginResponse.response.data.role === \"Admin\") {\n      localStorage.setItem(\"homesfy_lg\", window.btoa(JSON.stringify(nextProps.loginResponse.response.data)));\n      this.setState({\n        showLoader: false,\n        loggedIn: true\n      });\n    } else if (nextProps.loginResponse.response.meta.status === 400) {\n      this.toggleLoginError(nextProps.loginResponse.response.meta.message);\n    }\n  }\n\n  render() {\n    let redirectHtml;\n    let errorMessageElement;\n\n    if (this.state.loggedIn) {\n      return React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.loginError) {\n      let message = this.state.loginErrorMessage !== \"\" ? this.state.loginErrorMessage : \"Please enter a valid username and password.\";\n      errorMessageElement = React.createElement(\"div\", {\n        className: \"col-12 text-center mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        className: \"text-danger font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, message));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Loading, {\n      show: this.state.showLoader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row mx-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"mt-4\",\n      onSubmit: this.onLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group mb-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"exampleInputEmail1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Username or Email Address\"), React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend px-0 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-text\",\n      style: {\n        background: \"none\",\n        borderRight: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, faUserElement), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control no-focus-border\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onChange,\n      value: this.state.email,\n      style: {\n        borderLeft: \"none\",\n        paddingLeft: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"form-group mb-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"exampleInputPassword1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend px-0 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-text\",\n      style: {\n        background: \"none\",\n        borderRight: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, faLockElement), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control no-focus-border\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onChange,\n      value: this.state.password,\n      style: {\n        borderLeft: \"none\",\n        paddingLeft: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"form-group form-check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"form-check-input\",\n      id: \"rememberMe\",\n      onChange: this.onChange,\n      name: \"rememberMe\",\n      checked: this.state.rememberMe ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"rememberMe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Remember me\")), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn col-12 btn-login\",\n      onClick: this.onLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Log in\"), errorMessageElement))), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  loginResponse: state.common.loginResponse\n});\n\nexport default connect(mapStateToProps, {\n  adminLogin\n}, null, {\n  forwardRef: true\n})(Login);","map":{"version":3,"sources":["/home/dell/frontends/magnet_frontend_old/src/pages/login/index.js"],"names":["React","Component","Redirect","connect","adminLogin","getCookie","setCookie","eraseCookie","Loading","Login","constructor","props","onChange","e","target","name","setState","rememberMe","state","value","onLogin","loginRequest","email","password","role","showLoader","toggleLoginError","preventDefault","message","loginErrorMessage","loginError","loginFailedInterval","setInterval","clearInterval","login","remember","loggedIn","homesfy_lg","localStorage","getItem","history","push","componentWillReceiveProps","nextProps","loginResponse","response","meta","status","data","setItem","window","btoa","JSON","stringify","render","redirectHtml","errorMessageElement","background","borderRight","faUserElement","borderLeft","paddingLeft","faLockElement","mapStateToProps","common","forwardRef"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { adminLogin } from \"../../actions/commonActions\";\nimport { getCookie, setCookie, eraseCookie } from \"../../utils\";\n\nimport Loading from \"../components/Common/Loading\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    let login = getCookie(\"login\");\n    let password = getCookie(\"pwd\");\n    let remember = getCookie(\"remember\");\n\n    this.state = {\n      loggedIn: false,\n      email: login !== \"\" && login !== null ? login : \"\",\n      password: password !== \"\" && password !== null ? password : \"\",\n      rememberMe: remember === \"1\" ? true : false,\n      loginError: false,\n      loginErrorMessage: \"\",\n      showLoader: false\n    };\n\n    let homesfy_lg = localStorage.getItem(\"homesfy\");\n    if (homesfy_lg && homesfy_lg !== \"\") {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.loginResponse.response.meta.status === 200 &&\n      nextProps.loginResponse.response.data.role === \"Admin\") {\n      localStorage.setItem(\n        \"homesfy_lg\",\n        window.btoa(JSON.stringify(nextProps.loginResponse.response.data))\n      );\n      this.setState({ showLoader: false, loggedIn: true });\n    } else if (nextProps.loginResponse.response.meta.status === 400) {\n      this.toggleLoginError(nextProps.loginResponse.response.meta.message);\n    }\n  }\n\n  onChange = e => {\n    if (e.target.name === \"rememberMe\") {\n      this.setState({ rememberMe: !this.state.rememberMe });\n    } else {\n      this.setState({ [e.target.name]: e.target.value });\n    }\n  };\n\n  onLogin = e => {\n    const loginRequest = (({ email, password }) => ({\n      email,\n      password,\n      role: \"Admin\"\n    }))(this.state);\n\n    if (loginRequest.email !== \"\" && loginRequest.password !== \"\") {\n      if (this.state.rememberMe) {\n        setCookie(\"login\", loginRequest.email, 1);\n        setCookie(\"pwd\", loginRequest.password, 1);\n        setCookie(\"remember\", 1, 1);\n      }\n\n      this.setState({ showLoader: true });\n      this.props.adminLogin(loginRequest);\n    } else {\n      this.toggleLoginError();\n    }\n\n    e.preventDefault();\n  };\n\n  toggleLoginError = message => {\n    if (message && message !== \"\") {\n      this.setState({\n        loginErrorMessage: message,\n        showLoader: false,\n        loginError: true\n      });\n    } else {\n      this.setState({\n        loginErrorMessage: \"\",\n        showLoader: false,\n        loginError: true\n      });\n    }\n\n    let loginFailedInterval = setInterval(() => {\n      this.setState({ loginError: false });\n      clearInterval(loginFailedInterval);\n    }, 5000);\n  };\n\n  render() {\n    let redirectHtml;\n    let errorMessageElement;\n\n    if (this.state.loggedIn) {\n      return <Redirect to=\"/dashboard\" />;\n    }\n\n    if (this.state.loginError) {\n      let message =\n        this.state.loginErrorMessage !== \"\"\n          ? this.state.loginErrorMessage\n          : \"Please enter a valid username and password.\";\n      errorMessageElement = (\n        <div className=\"col-12 text-center mt-2\">\n          <small className=\"text-danger font-weight-bold\">{message}</small>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Loading show={this.state.showLoader} />\n        \n        {/* <header className=\"App-header\">Header</header> */}\n        <section className=\"login\">\n          <div className=\"row mx-0\">\n            <form className=\"mt-4\" onSubmit={this.onLogin}>\n                  <div className=\"form-group mb-1\">\n                    <label htmlFor=\"exampleInputEmail1\">\n                      Username or Email Address\n                    </label>\n                    <div className=\"input-group mb-2\">\n                      <div className=\"input-group-prepend px-0 col-12\">\n                        <div\n                          className=\"input-group-text\"\n                          style={{ background: \"none\", borderRight: \"none\" }}\n                        >\n                          {faUserElement}\n                        </div>\n                        <input\n                          type=\"email\"\n                          className=\"form-control no-focus-border\"\n                          id=\"email\"\n                          name=\"email\"\n                          onChange={this.onChange}\n                          value={this.state.email}\n                          style={{ borderLeft: \"none\", paddingLeft: \"0\" }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"form-group mb-1\">\n                    <label htmlFor=\"exampleInputPassword1\">Password</label>\n                    <div className=\"input-group mb-2\">\n                      <div className=\"input-group-prepend px-0 col-12\">\n                        <div\n                          className=\"input-group-text\"\n                          style={{ background: \"none\", borderRight: \"none\" }}\n                        >\n                          {faLockElement}\n                        </div>\n                        <input\n                          type=\"password\"\n                          className=\"form-control no-focus-border\"\n                          id=\"password\"\n                          name=\"password\"\n                          onChange={this.onChange}\n                          value={this.state.password}\n                          style={{ borderLeft: \"none\", paddingLeft: \"0\" }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"form-group form-check\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"form-check-input\"\n                      id=\"rememberMe\"\n                      onChange={this.onChange}\n                      name=\"rememberMe\"\n                      checked={this.state.rememberMe ? true : false}\n                    />\n                    <label className=\"form-check-label\" htmlFor=\"rememberMe\">\n                      Remember me\n                    </label>\n                  </div>\n                  <button\n                    type=\"submit\"\n                    className=\"btn col-12 btn-login\"\n                    onClick={this.onLogin}\n                  >\n                    Log in\n                  </button>\n                  {errorMessageElement}\n                </form>\n          </div>\n        </section>\n        <footer />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  loginResponse: state.common.loginResponse\n});\n\nexport default connect(\n  mapStateToProps,\n  {\n    adminLogin\n  },\n  null,\n  { forwardRef: true }\n)(Login);\n"]},"metadata":{},"sourceType":"module"}