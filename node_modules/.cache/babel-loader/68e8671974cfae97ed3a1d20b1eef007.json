{"ast":null,"code":"var _jsxFileName = \"/home/dell/frontends/magnet_frontend_old/src/pages/login/index.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { adminLogin } from \"../../actions/commonActions\";\nimport { getCookie, setCookie, eraseCookie } from \"../../utils/cookie\";\nimport Loading from \"../../components/Common/Loading\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      if (e.target.name === \"rememberMe\") {\n        this.setState({\n          rememberMe: !this.state.rememberMe\n        });\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      }\n    };\n\n    this.onLogin = e => {\n      const loginRequest = (({\n        phoneNo,\n        password\n      }) => ({\n        phoneNo,\n        password\n      }))(this.state);\n\n      if (loginRequest.phoneNo !== \"\" && loginRequest.password !== \"\") {\n        if (this.state.rememberMe) {\n          setCookie(\"login\", loginRequest.phoneNo, 1);\n          setCookie(\"pwd\", loginRequest.password, 1);\n          setCookie(\"remember\", 1, 1);\n        }\n\n        this.setState({\n          showLoader: true\n        });\n        this.props.adminLogin(loginRequest);\n      } else {\n        this.toggleLoginError();\n      }\n\n      e.preventDefault();\n    };\n\n    this.toggleLoginError = message => {\n      if (message && message !== \"\") {\n        this.setState({\n          loginErrorMessage: message,\n          showLoader: false,\n          loginError: true\n        });\n      } else {\n        this.setState({\n          loginErrorMessage: \"\",\n          showLoader: false,\n          loginError: true\n        });\n      }\n\n      let loginFailedInterval = setInterval(() => {\n        this.setState({\n          loginError: false\n        });\n        clearInterval(loginFailedInterval);\n      }, 5000);\n    };\n\n    let login = getCookie(\"login\");\n\n    let _password = getCookie(\"pwd\");\n\n    let remember = getCookie(\"remember\");\n    this.state = {\n      loggedIn: false,\n      phoneNo: login !== \"\" && login !== null ? login : \"\",\n      password: _password !== \"\" && _password !== null ? _password : \"\",\n      rememberMe: remember === \"1\" ? true : false,\n      loginError: false,\n      loginErrorMessage: \"\",\n      showLoader: false\n    };\n    let homesfy_lg = localStorage.getItem(\"homesfy\");\n\n    if (homesfy_lg && homesfy_lg !== \"\") {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(\"nextProps\", nextProps);\n\n    if (nextProps.loginResponse.response.meta.status === 200 && nextProps.loginResponse.response.data.role === \"Admin\") {\n      localStorage.setItem(\"homesfy_lg\", window.btoa(JSON.stringify(nextProps.loginResponse.response.data)));\n      this.setState({\n        showLoader: false,\n        loggedIn: true\n      });\n    } else if (nextProps.loginResponse.response.meta.status === 400) {\n      this.toggleLoginError(nextProps.loginResponse.response.meta.message);\n    }\n  }\n\n  render() {\n    let redirectHtml;\n    let errorMessageElement;\n\n    if (this.state.loggedIn) {\n      return React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.loginError) {\n      let message = this.state.loginErrorMessage !== \"\" ? this.state.loginErrorMessage : \"Please enter a valid username and password.\";\n      errorMessageElement = React.createElement(\"div\", {\n        className: \"col-12 text-center mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        className: \"text-danger font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, message));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Loading, {\n      show: this.state.showLoader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row mx-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"mt-4\",\n      onSubmit: this.onLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group mb-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"exampleInputphoneNo1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Username or phoneNo\"), React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend px-0 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-text\",\n      style: {\n        background: \"none\",\n        borderRight: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control no-focus-border\",\n      id: \"phoneNo\",\n      name: \"phoneNo\",\n      onChange: this.onChange,\n      value: this.state.phoneNo,\n      style: {\n        borderLeft: \"none\",\n        paddingLeft: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"form-group mb-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"exampleInputPassword1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"div\", {\n      className: \"input-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend px-0 col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-text\",\n      style: {\n        background: \"none\",\n        borderRight: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control no-focus-border\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onChange,\n      value: this.state.password,\n      style: {\n        borderLeft: \"none\",\n        paddingLeft: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"form-group form-check\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"form-check-input\",\n      id: \"rememberMe\",\n      onChange: this.onChange,\n      name: \"rememberMe\",\n      checked: this.state.rememberMe ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"rememberMe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Remember me\")), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn col-12 btn-login\",\n      onClick: this.onLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Log in\"), errorMessageElement))), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  loginResponse: state.common.loginResponse\n});\n\nexport default connect(mapStateToProps, {\n  adminLogin\n}, null, {\n  forwardRef: true\n})(Login);","map":{"version":3,"sources":["/home/dell/frontends/magnet_frontend_old/src/pages/login/index.js"],"names":["React","Component","Redirect","connect","adminLogin","getCookie","setCookie","eraseCookie","Loading","Login","constructor","props","onChange","e","target","name","setState","rememberMe","state","value","onLogin","loginRequest","phoneNo","password","showLoader","toggleLoginError","preventDefault","message","loginErrorMessage","loginError","loginFailedInterval","setInterval","clearInterval","login","remember","loggedIn","homesfy_lg","localStorage","getItem","history","push","componentWillReceiveProps","nextProps","console","log","loginResponse","response","meta","status","data","role","setItem","window","btoa","JSON","stringify","render","redirectHtml","errorMessageElement","background","borderRight","borderLeft","paddingLeft","mapStateToProps","common","forwardRef"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { adminLogin } from \"../../actions/commonActions\";\nimport { getCookie, setCookie, eraseCookie } from \"../../utils/cookie\";\n\nimport Loading from \"../../components/Common/Loading\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    let login = getCookie(\"login\");\n    let password = getCookie(\"pwd\");\n    let remember = getCookie(\"remember\");\n\n    this.state = {\n      loggedIn: false,\n      phoneNo: login !== \"\" && login !== null ? login : \"\",\n      password: password !== \"\" && password !== null ? password : \"\",\n      rememberMe: remember === \"1\" ? true : false,\n      loginError: false,\n      loginErrorMessage: \"\",\n      showLoader: false\n    };\n\n    let homesfy_lg = localStorage.getItem(\"homesfy\");\n    if (homesfy_lg && homesfy_lg !== \"\") {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(\"nextProps\",nextProps)\n    if (nextProps.loginResponse.response.meta.status === 200 &&\n      nextProps.loginResponse.response.data.role === \"Admin\") {\n      localStorage.setItem(\n        \"homesfy_lg\",\n        window.btoa(JSON.stringify(nextProps.loginResponse.response.data))\n      );\n      this.setState({ showLoader: false, loggedIn: true });\n    } else if (nextProps.loginResponse.response.meta.status === 400) {\n      this.toggleLoginError(nextProps.loginResponse.response.meta.message);\n    }\n  }\n\n  onChange = e => {\n    if (e.target.name === \"rememberMe\") {\n      this.setState({ rememberMe: !this.state.rememberMe });\n    } else {\n      this.setState({ [e.target.name]: e.target.value });\n    }\n  };\n\n  onLogin = e => {\n    const loginRequest = (({ phoneNo, password }) => ({\n      phoneNo,\n      password,\n    }))(this.state);\n\n    if (loginRequest.phoneNo !== \"\" && loginRequest.password !== \"\") {\n      if (this.state.rememberMe) {\n        setCookie(\"login\", loginRequest.phoneNo, 1);\n        setCookie(\"pwd\", loginRequest.password, 1);\n        setCookie(\"remember\", 1, 1);\n      }\n\n      this.setState({ showLoader: true });\n      this.props.adminLogin(loginRequest);\n    } else {\n      this.toggleLoginError();\n    }\n\n    e.preventDefault();\n  };\n\n  toggleLoginError = message => {\n    if (message && message !== \"\") {\n      this.setState({\n        loginErrorMessage: message,\n        showLoader: false,\n        loginError: true\n      });\n    } else {\n      this.setState({\n        loginErrorMessage: \"\",\n        showLoader: false,\n        loginError: true\n      });\n    }\n\n    let loginFailedInterval = setInterval(() => {\n      this.setState({ loginError: false });\n      clearInterval(loginFailedInterval);\n    }, 5000);\n  };\n\n  render() {\n    let redirectHtml;\n    let errorMessageElement;\n\n    if (this.state.loggedIn) {\n      return <Redirect to=\"/dashboard\" />;\n    }\n\n    if (this.state.loginError) {\n      let message =\n        this.state.loginErrorMessage !== \"\"\n          ? this.state.loginErrorMessage\n          : \"Please enter a valid username and password.\";\n      errorMessageElement = (\n        <div className=\"col-12 text-center mt-2\">\n          <small className=\"text-danger font-weight-bold\">{message}</small>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Loading show={this.state.showLoader} />\n        \n        {/* <header className=\"App-header\">Header</header> */}\n        <section className=\"login\">\n          <div className=\"row mx-0\">\n            <form className=\"mt-4\" onSubmit={this.onLogin}>\n                  <div className=\"form-group mb-1\">\n                    <label htmlFor=\"exampleInputphoneNo1\">\n                      Username or phoneNo \n                    </label>\n                    <div className=\"input-group mb-2\">\n                      <div className=\"input-group-prepend px-0 col-12\">\n                        <div\n                          className=\"input-group-text\"\n                          style={{ background: \"none\", borderRight: \"none\" }}\n                        >\n                        </div>\n                        <input\n                          type=\"number\"\n                          className=\"form-control no-focus-border\"\n                          id=\"phoneNo\"\n                          name=\"phoneNo\"\n                          onChange={this.onChange}\n                          value={this.state.phoneNo}\n                          style={{ borderLeft: \"none\", paddingLeft: \"0\" }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"form-group mb-1\">\n                    <label htmlFor=\"exampleInputPassword1\">Password</label>\n                    <div className=\"input-group mb-2\">\n                      <div className=\"input-group-prepend px-0 col-12\">\n                        <div\n                          className=\"input-group-text\"\n                          style={{ background: \"none\", borderRight: \"none\" }}\n                        >\n                        </div>\n                        <input\n                          type=\"password\"\n                          className=\"form-control no-focus-border\"\n                          id=\"password\"\n                          name=\"password\"\n                          onChange={this.onChange}\n                          value={this.state.password}\n                          style={{ borderLeft: \"none\", paddingLeft: \"0\" }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"form-group form-check\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"form-check-input\"\n                      id=\"rememberMe\"\n                      onChange={this.onChange}\n                      name=\"rememberMe\"\n                      checked={this.state.rememberMe ? true : false}\n                    />\n                    <label className=\"form-check-label\" htmlFor=\"rememberMe\">\n                      Remember me\n                    </label>\n                  </div>\n                  <button\n                    type=\"submit\"\n                    className=\"btn col-12 btn-login\"\n                    onClick={this.onLogin}\n                  >\n                    Log in\n                  </button>\n                  {errorMessageElement}\n                </form>\n          </div>\n        </section>\n        <footer />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  loginResponse: state.common.loginResponse\n});\n\nexport default connect(\n  mapStateToProps,\n  {\n    adminLogin\n  },\n  null,\n  { forwardRef: true }\n)(Login);\n"]},"metadata":{},"sourceType":"module"}